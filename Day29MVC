use training;

create table loginTbl(name varchar(26), uname varchar(10), passwd varchar(10));


insert into loginTbl values
('Administrator','admin','cSharp'),('Manager','monica','gupta'),('guest','guest','visitor');

select * from loginTbl;






In the CRUD_ADO->Class1.cs :


using System;
using System.Data;
using System.Data.SqlClient;

namespace CRUD_ADO
{
    public class CRUD
    {
        public static Boolean chkValidity(string uname, string pass)
        {
            try
            {
                //SqlConnection con = new SqlConnection(@"Data Source=DESKTOP-ORPSK1N;Initial Catalog=training;Integrated Security=True");
                SqlConnection con = new SqlConnection(@"Data Source=DESKTOP-O7LF2JA;Initial Catalog=training;Integrated Security=True");
                con.Open();
                SqlCommand cmd = new SqlCommand("Select * from loginTbl", con);
                cmd.CommandType = CommandType.Text;
                SqlDataReader rdr = cmd.ExecuteReader();         
                while (rdr.Read())
                {
                    if (rdr.GetString("uname").Equals(uname) && rdr.GetString("passwd").Equals(pass))
                        return true;
                }

            }
            catch (Exception e) { return false; }
            return false;
        }
    }
}





Views->Login->Index.cshtml:

<h1>Login to enter the Site:
    <br />
    
        <form action="/Login/mySite">
            <table>
                <tr>
                    <td>Enter Login Id: </td>
                    <td><input type="text" name="uname" /></td>
                </tr>
                <tr>
                    <td>Enter Password: </td>
                    <td><input type="text" name="pass" /></td>
                </tr>
                <tr>
                    <td rowspan="2"><input type="submit" value="login" /></td>
                </tr>
            </table>

           </form>
  
</h1>







using Microsoft.AspNetCore.Mvc;

namespace Day29MVC.Controllers
{
    public class LoginController : Controller
    {
        public IActionResult Index()
        {
            return View();
        }
       public IActionResult mySite(string uname, string pass)
        {
            if (CRUD_ADO.CRUD.chkValidity(uname, pass))
            {
                return RedirectToAction("Success");
            }
            return RedirectToAction("Failure");

            
        }
        public IActionResult Success()
        {
            return View();
        }
        public IActionResult Failure()
        {
            return View();
        }

    }
}







Success.cshtml:
<h1>
    Welcome to our Site !! You are Authenticated by our Server!
</h1>
<h3><a href="/Login/Index">Login page Again</a></h3>


Failure.cshtml:
<h1>
    You are NOT Authenticated by our Server! Please Login with correct Credentials.
</h1>
<h3><a href="/Login/Index">Login page Again</a></h3>






